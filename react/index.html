<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Familien Bro - Ukesmeny</title>
    
    <!-- 1. Henter Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Henter React og ReactDOM (Versjon 18) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Henter Babel (for √• oversette koden) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. Henter Ikoner (Standard Lucide - mer stabilt enn React-versjonen i single-file) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Print styles */
        @media print {
            .no-print { display: none !important; }
            body { background: white; }
            .print-only { display: block !important; }
        }
    </style>
</head>
<body>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Hjelpekomponent for ikoner for √• sikre at de laster
        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]); // Kj√∏r hver gang navnet endres

            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('menu');
            const [checkedItems, setCheckedItems] = useState({});
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            // Sikrer at ikoner tegnes opp n√•r vi bytter fane eller laster siden
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            });

            // Laster handleliste fra minnet
            useEffect(() => {
                try {
                    const saved = localStorage.getItem('familienBro-handleliste');
                    if (saved) setCheckedItems(JSON.parse(saved));
                } catch (e) {
                    console.error("Kunne ikke laste handleliste", e);
                }
            }, []);

            const toggleItem = (key) => {
                const newState = { ...checkedItems, [key]: !checkedItems[key] };
                setCheckedItems(newState);
                localStorage.setItem('familienBro-handleliste', JSON.stringify(newState));
            };

            const resetList = () => {
                if(confirm('Vil du nullstille hele listen?')) {
                    setCheckedItems({});
                    localStorage.removeItem('familienBro-handleliste');
                }
            };

            const menuData = [
                {
                    day: "Mandag",
                    theme: "Kj√∏ttfri start & Tarmhelse",
                    lunchKid: "Grovbr√∏d med hummus, paprika & druer",
                    lunchAdult: "Quinoasalat med fetaost & valn√∏tter",
                    dinner: "Kremet linsegryte med kokosmelk & nanbr√∏d",
                    iconName: "leaf",
                    color: "text-green-600",
                    image: "https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=800&auto=format&fit=crop"
                },
                {
                    day: "Tirsdag",
                    theme: "Fet fisk & Omega-3",
                    lunchKid: "Fullkornslefse med sn√∏frisk & r√∏kelaks",
                    lunchAdult: "Rester av linsegryte",
                    dinner: "Ovnsbakt laks med rotgr√∏nnsaker & tzatziki",
                    iconName: "fish",
                    color: "text-blue-500",
                    image: "https://images.unsplash.com/photo-1467003909585-2f8a7270028d?q=80&w=800&auto=format&fit=crop"
                },
                {
                    day: "Onsdag",
                    theme: "Kylling & Fullkorn",
                    lunchKid: "Havrelapper med brunost & gulrot",
                    lunchAdult: "Grovbr√∏d med makrell i tomat & egg",
                    dinner: "Kyllingpanne med pesto & fullkornspasta",
                    iconName: "utensils-crossed",
                    color: "text-orange-500",
                    image: "https://images.unsplash.com/photo-1473093295043-cdd812d0e601?q=80&w=800&auto=format&fit=crop"
                },
                {
                    day: "Torsdag",
                    theme: "Suppe & Raske l√∏sninger",
                    lunchKid: "Grovbr√∏d med leverpostei & r√∏dbeter",
                    lunchAdult: "Salat med ruccola, avokado & kikerter",
                    dinner: "Hjemmelaget tomatsuppe med egg (og linser!)",
                    iconName: "chef-hat",
                    color: "text-red-500",
                    image: "https://images.unsplash.com/photo-1547592166-23acbe3b001b?q=80&w=800&auto=format&fit=crop"
                },
                {
                    day: "Fredag",
                    theme: "Fisketaco (Middelhavs-vri)",
                    lunchKid: "Pastasalat med mais & eple",
                    lunchAdult: "Omelett med spinat & fetaost",
                    dinner: "Fisketaco med torsk & mangosalsa",
                    iconName: "fish",
                    color: "text-purple-500",
                    image: "https://images.unsplash.com/photo-1512838243191-e81e8f66f1f9?q=80&w=800&auto=format&fit=crop"
                }
            ];

            const shoppingList = {
                "Frukt & Gr√∏nt": ["Agurk (1 stk)", "Paprika (2 stk)", "Spinat (stor pose)", "Cherrytomater (1 pk)", "S√∏tpoteter (2 stk)", "Gulr√∏tter (bunt)", "Brokkoli (1 stk)", "Ruccola (1 pk)", "Avokado (1 stk)", "R√∏dk√•l (1/2 stk)", "L√∏k (3 gule)", "Hvitl√∏k", "Ingef√¶r", "Chili", "Druer (1 pk)", "Bananer (2 stk)", "Mango (1 stk)", "Lime & Sitron", "Epler"],
                "Kj√∏l & Meieri": ["R√∏kelaks/Kalkunp√•legg", "Makrell i tomat", "Leverpostei", "Brunost", "Sn√∏frisk", "Fetaost (1 pk)", "Egg (12 stk)", "Melk (1 liter)", "Yoghurt naturell (stor)", "R√∏mme/Cr√®me Fraiche", "Sm√∏r"],
                "T√∏rrvarer": ["Hakkede tomater (4 bokser)", "Kikerter (1 boks)", "Kokosmelk (1 boks)", "Mais (liten boks)", "R√∏de linser (t√∏rre)", "Quinoa/Bulgur", "Fullkornsris", "Fullkornspasta", "Havregryn", "Grovbr√∏d", "Fullkornslefser", "Nanbr√∏d", "N√∏tter/Kjerner", "Pesto", "Buljong"],
                "Fisk & Kj√∏tt": ["Laksefileter (4 stk)", "Torskefilet (400-500g)", "Kyllingfilet (400g)"]
            };

            const recipe = {
                title: 'Tomatsuppe med "skjulte" linser',
                desc: 'En superhelt-suppe som lurer inn masse n√¶ring!',
                servings: 4,
                ingredients: ["1 ss olivenolje", "1 gul l√∏k, finhakket", "2 fedd hvitl√∏k, hakket", "2 store gulr√∏tter, i terninger", "1 dl t√∏rre r√∏de linser (skylt)", "2 bokser hakkede tomater", "7-8 dl gr√∏nnsakskraft", "1 ts sukker eller honning", "0.5 dl fl√∏te/kokosmelk (valgfritt)"],
                steps: ["Varm oljen i en kjele. Stek l√∏k og hvitl√∏k mykt. Ha i gulrot og surr i 1 min.", "Tilsett tomater, kraft og linser. Kok opp.", "La sm√•koke under lokk i 15-20 min til alt er m√∏rt.", "Kj√∏r suppen helt glatt med stavmikser.", "R√∏r inn fl√∏te og smak til med salt, pepper og sukker.", "Server med egg og godt br√∏d!"]
            };

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="bg-emerald-700 text-white shadow-lg sticky top-0 z-50 no-print">
                        <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <Icon name="leaf" className="w-6 h-6 text-emerald-300" />
                                <h1 className="text-xl font-bold tracking-tight">Familien Bro</h1>
                            </div>
                            
                            <nav className="hidden md:flex gap-1 bg-emerald-800/50 p-1 rounded-lg">
                                {['menu', 'shopping', 'recipe'].map((tab) => (
                                    <button
                                        key={tab}
                                        onClick={() => setActiveTab(tab)}
                                        className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${
                                            activeTab === tab ? 'bg-white text-emerald-800 shadow-sm' : 'text-emerald-100 hover:bg-emerald-700'
                                        }`}
                                    >
                                        {tab === 'menu' && 'Ukesmeny'}
                                        {tab === 'shopping' && 'Handleliste'}
                                        {tab === 'recipe' && 'Oppskrift'}
                                    </button>
                                ))}
                            </nav>

                            <button className="md:hidden p-2" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                                <Icon name={mobileMenuOpen ? "x" : "menu"} className="w-6 h-6" />
                            </button>
                        </div>

                        {mobileMenuOpen && (
                            <div className="md:hidden bg-emerald-800 border-t border-emerald-600">
                                <div className="flex flex-col p-2 space-y-1">
                                    {['menu', 'shopping', 'recipe'].map((tab) => (
                                        <button
                                            key={tab}
                                            onClick={() => { setActiveTab(tab); setMobileMenuOpen(false); }}
                                            className={`px-4 py-3 rounded-md text-left font-medium ${
                                                activeTab === tab ? 'bg-emerald-900 text-white' : 'text-emerald-100'
                                            }`}
                                        >
                                            {tab === 'menu' && 'üìÖ Ukesmeny'}
                                            {tab === 'shopping' && 'üõí Handleliste'}
                                            {tab === 'recipe' && 'üç≤ Ukens Oppskrift'}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </header>

                    <main className="max-w-4xl mx-auto px-4 py-6 md:py-10 w-full flex-grow">
                        
                        {/* VIEW: MENY */}
                        {activeTab === 'menu' && (
                            <div className="space-y-6 animate-fade-in">
                                <div className="text-center mb-8">
                                    <h2 className="text-3xl font-bold text-slate-800 mb-2">Ukesmeny</h2>
                                    <p className="text-slate-500">Middelhavskost for store og sm√•</p>
                                </div>

                                <div className="grid gap-6 md:grid-cols-1">
                                    {menuData.map((day, idx) => (
                                        <div key={idx} className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col md:flex-row hover:shadow-md transition-shadow">
                                            <div className="h-48 md:w-48 md:h-auto relative bg-slate-200 shrink-0">
                                                <img src={day.image} alt={day.dinner} className="w-full h-full object-cover" />
                                                <div className="absolute top-0 left-0 bg-emerald-600 text-white px-3 py-1 text-sm font-bold rounded-br-lg">
                                                    {day.day}
                                                </div>
                                            </div>
                                            <div className="p-6 flex-1 flex flex-col justify-center">
                                                <div className="flex items-center gap-2 mb-3">
                                                    <Icon name={day.iconName} className={`w-5 h-5 ${day.color}`} />
                                                    <span className="text-xs font-semibold uppercase tracking-wider text-slate-400 border border-slate-200 px-2 py-0.5 rounded-full">
                                                        {day.theme}
                                                    </span>
                                                </div>
                                                <div className="space-y-3">
                                                    <div>
                                                        <h3 className="text-lg font-bold text-slate-800 leading-tight mb-1">{day.dinner}</h3>
                                                        <p className="text-sm text-slate-500 flex items-center gap-1"><Icon name="utensils-crossed" className="w-3 h-3" /> Middag</p>
                                                    </div>
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 pt-3 border-t border-slate-100">
                                                        <div className="bg-orange-50 p-2 rounded-lg">
                                                            <p className="text-xs font-bold text-orange-800 uppercase mb-0.5">Lunsj Barn</p>
                                                            <p className="text-sm text-slate-700 leading-snug">{day.lunchKid}</p>
                                                        </div>
                                                        <div className="bg-blue-50 p-2 rounded-lg">
                                                            <p className="text-xs font-bold text-blue-800 uppercase mb-0.5">Lunsj Voksen</p>
                                                            <p className="text-sm text-slate-700 leading-snug">{day.lunchAdult}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* VIEW: HANDLELISTE */}
                        {activeTab === 'shopping' && (
                            <div className="max-w-2xl mx-auto animate-fade-in">
                                <div className="flex items-center justify-between mb-6 no-print">
                                    <h2 className="text-3xl font-bold text-slate-800">Handleliste</h2>
                                    <div className="flex gap-3">
                                        <button onClick={() => window.print()} className="text-sm text-emerald-600 hover:text-emerald-800 font-medium flex items-center gap-1">
                                            <Icon name="printer" className="w-4 h-4 inline" /> Skriv ut
                                        </button>
                                        <button onClick={resetList} className="text-sm text-emerald-600 hover:text-emerald-800 font-medium">
                                            Nullstill
                                        </button>
                                    </div>
                                </div>

                                <div className="grid gap-6">
                                    {Object.entries(shoppingList).map(([category, items]) => (
                                        <div key={category} className="bg-white rounded-xl shadow-sm border border-slate-200 p-6 break-inside-avoid">
                                            <h3 className="text-lg font-bold text-emerald-800 border-b border-emerald-100 pb-2 mb-4">
                                                {category}
                                            </h3>
                                            <div className="space-y-3">
                                                {items.map((item, idx) => {
                                                    const key = `${category}-${idx}`;
                                                    const isChecked = checkedItems[key];
                                                    return (
                                                        <div 
                                                            key={key} 
                                                            onClick={() => toggleItem(key)}
                                                            className="flex items-start gap-3 cursor-pointer group select-none"
                                                        >
                                                            <div className={`mt-0.5 shrink-0 transition-colors ${isChecked ? 'text-emerald-500' : 'text-slate-300 group-hover:text-emerald-400'}`}>
                                                                <Icon name={isChecked ? "check-circle-2" : "circle"} className="w-5 h-5" />
                                                            </div>
                                                            <span className={`text-base transition-all ${
                                                                isChecked ? 'text-slate-400 line-through decoration-slate-300' : 'text-slate-700'
                                                            }`}>
                                                                {item}
                                                            </span>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* VIEW: OPPSKRIFT */}
                        {activeTab === 'recipe' && (
                            <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden animate-fade-in">
                                <div className="h-64 relative">
                                    <img src="https://images.unsplash.com/photo-1547592166-23acbe3b001b?q=80&w=1200&auto=format&fit=crop" alt="Tomatsuppe" className="w-full h-full object-cover" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end">
                                        <div className="p-8 text-white">
                                            <h2 className="text-3xl font-bold mb-2">{recipe.title}</h2>
                                            <p className="text-lg text-emerald-200">{recipe.desc}</p>
                                        </div>
                                    </div>
                                </div>

                                <div className="p-8">
                                    <div className="flex items-center gap-6 mb-8 text-sm text-slate-500 border-b border-slate-100 pb-6">
                                        <div className="flex items-center gap-2"><Icon name="chef-hat" className="text-emerald-600 w-5 h-5" /><span>Enkel</span></div>
                                        <div className="flex items-center gap-2"><Icon name="utensils-crossed" className="text-emerald-600 w-5 h-5" /><span>{recipe.servings} Porsjoner</span></div>
                                        <div className="flex items-center gap-2"><Icon name="coffee" className="text-emerald-600 w-5 h-5" /><span>25 min</span></div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-10">
                                        <div>
                                            <h3 className="font-bold text-slate-800 text-lg mb-4 flex items-center gap-2">
                                                <span className="bg-emerald-100 text-emerald-800 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                                Ingredienser
                                            </h3>
                                            <ul className="space-y-2 text-slate-700">
                                                {recipe.ingredients.map((ing, i) => (
                                                    <li key={i} className="flex items-start gap-2">
                                                        <span className="w-1.5 h-1.5 bg-emerald-400 rounded-full mt-2 shrink-0"></span>
                                                        {ing}
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>

                                        <div>
                                            <h3 className="font-bold text-slate-800 text-lg mb-4 flex items-center gap-2">
                                                <span className="bg-emerald-100 text-emerald-800 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                                Fremgangsm√•te
                                            </h3>
                                            <ol className="space-y-4">
                                                {recipe.steps.map((step, i) => (
                                                    <li key={i} className="flex gap-4">
                                                        <span className="font-bold text-emerald-600 text-lg font-mono">{i + 1}.</span>
                                                        <p className="text-slate-700">{step}</p>
                                                    </li>
                                                ))}
                                            </ol>
                                        </div>
                                    </div>
                                    
                                    <div className="mt-8 bg-blue-50 p-4 rounded-lg border border-blue-100">
                                        <h4 className="font-bold text-blue-800 mb-1 text-sm">üí° Tips fra Familien Bro</h4>
                                        <p className="text-blue-700 text-sm">
                                            Server gjerne med fullkornsmakaroni oppi sk√•len hvis barna er skeptiske til suppe. Det sl√•r alltid an!
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="bg-slate-800 text-slate-400 py-8 mt-12 text-center text-sm no-print">
                        <p>Familien Bro - Ukesmeny</p>
                        <p className="mt-1">Basert p√• middelhavsdietten üå±</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>